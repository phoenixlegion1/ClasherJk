<!DOCTYPE html>
<html lang="en">
<head>
  <title>Simple Band Website</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <style>
    body {font-family: "Lato", sans-serif; margin: 0; display: flex; flex-direction: column; min-height: 100vh;}
    .content {flex: 1;} /* Fills available space for main content */
    footer {padding: 0; background-color: #f1f1f1; width: 100%; text-align: center;}

    /* Chat button styling */
    .chat-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 24px;
      cursor: pointer;
    }

    /* Chatbox styling */
    .chatbox {
      position: fixed;
      bottom: 100px;
      right: 20px;
      width: 300px;
      max-height: 400px;
      display: none;
      background-color: white;
      border: 1px solid #ccc;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      z-index: 100;
    }
    .chatbox-header {
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      font-weight: bold;
      text-align: center;
    }
    .chatbox-messages {
      padding: 10px;
      height: 250px;
      overflow-y: auto;
      border-top: 1px solid #ccc;
      border-bottom: 1px solid #ccc;
    }
    .chatbox-input {
      display: flex;
    }
    .chatbox-input input {
      width: 100%;
      padding: 10px;
      border: none;
      border-top: 1px solid #ccc;
    }
    .chatbox-input button {
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-black w3-card">
    <h1 class="w3-bar-item w3-padding-large w3-left" style="margin:0;">Clasher Jk</h1>
  </div>
</div>

<!-- Page Content -->
<div class="w3-content content" style="max-width:2000px;margin-top:46px">
  <!-- Main Section -->
  <div class="w3-container w3-center w3-padding-64" style="max-width:800px">
    <h2 class="w3-wide">BOSS OF COC</h2>
    <p class="w3-opacity"><i>Announcement</i></p>
    <p class="w3-justify">Hello everyone, this message is difficult to share. After much thought, Iâ€™ve decided to temporarily close BOSS OF COC.</p>

    <p class="w3-justify">Weâ€™ve constantly had to remind members to complete clan games, capital attacks, war attacks, and donations, but things still havenâ€™t been running as they should. With over 50% players not completing capital attacks, inactive, not completing clan games and war donations itâ€™s become overwhelming and frustrating for me. managing things has become challenging and exhausting.</p>

    <p class="w3-justify">This isnâ€™t a decision I make lightly. Many of you have been loyal, committed, and exceptional players, and I truly appreciate your dedication. Itâ€™s because of members like you that Iâ€™m confident weâ€™ll come back stronger.</p>

    <p class="w3-justify">Right now, I need to take a step back and recharge, so this pause is essential for both my well-being and our clanâ€™s future.</p>

    <p class="w3-justify">When we return, weâ€™ll be refreshed, refocused, and ready to rebuild with a stronger, more dedicated team. Thank you for your loyalty and understanding.
    </p>
    <p class="w3-justify">CWL will not be held in BOSS OF COC untill it's rebuild. If you want to play CWL, join at #29Y02C80P. CWL will start on November 1st there.</p>
  </div>
</div>

<!-- Chat Button -->
<button class="chat-btn" onclick="toggleChat()">ðŸ’¬</button>

<!-- Chatbox -->
<div class="chatbox" id="chatbox">
  <div class="chatbox-header">Chat with Us</div>
  <div class="chatbox-messages" id="chatboxMessages">
    <p>Welcome! Start chatting below.</p>
  </div>
  <div class="chatbox-input">
    <input type="text" id="chatInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<!-- Footer -->
<footer class="w3-opacity w3-light-grey">
  <p>Thank you and Keep Clashing</p>
</footer>

<script>
  let username = localStorage.getItem("username");

  function toggleChat() {
    const chatbox = document.getElementById("chatbox");
    chatbox.style.display = chatbox.style.display === "none" || chatbox.style.display === "" ? "block" : "none";

    if (!username) {
      username = prompt("Please enter your name to start chatting:");
      if (username) {
        localStorage.setItem("username", username);
        addMessage("Welcome, " + username + "!");
      } else {
        toggleChat();
      }
    }
  }

  function sendMessage() {
    const input = document.getElementById("chatInput");
    const message = input.value.trim();
    
    if (message) {
      addMessage(username + ": " + message);
      input.value = ""; // Clear input field after sending
    }
  }

  function addMessage(text) {
    const messagesDiv = document.getElementById("chatboxMessages");
    const newMessage = document.createElement("p");
    newMessage.textContent = text;
    messagesDiv.appendChild(newMessage);
    messagesDiv.scrollTop = messagesDiv.scrollHeight; // Auto-scroll to the bottom
  }

  // Load previous messages from the session (simulated for display)
  const previousMessages = JSON.parse(sessionStorage.getItem("messages")) || [];
  previousMessages.forEach(addMessage);

  function saveMessage(text) {
    previousMessages.push(text);
    sessionStorage.setItem("messages", JSON.stringify(previousMessages));
  }

  // Override the sendMessage function to save each message
  function sendMessage() {
    const input = document.getElementById("chatInput");
    const message = input.value.trim();
    
    if (message) {
      const formattedMessage = username + ": " + message;
      addMessage(formattedMessage);
      saveMessage(formattedMessage);
      input.value = ""; // Clear input field after sending
    }
  }
</script>

</body>
</html>